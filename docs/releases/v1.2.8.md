# v1.2.8 - 2026-02-20

This patch fixes several edge-cases in the installer so `krnr` behaves predictably when the installer is run under `sudo` but a **user**-scope install is requested.

## Bug fixes

### Install/uninstall when running under sudo (user scope)
- Problem: installing as `sudo` for a user sometimes recorded metadata or created files owned by `root`, causing `krnr status` (run as the normal user) to report `on PATH: false`, and `krnr uninstall` to fail to locate or remove the installed files.
- Fix: the installer now writes metadata into the invoking user's `KRNR_HOME` (when `SUDO_USER` is set) and ensures the metadata file and installed binary are owned by that user. `krnr status` will also honor recorded `AddedToPath` so it reports the installation as `on PATH: true` immediately after an add-to-PATH install.

### Reinstall-after-uninstall behavior
- Fix: reinstalling a user-scope install under `sudo` after an uninstall no longer leaves the recorded metadata in an unreadable state; `krnr status` and `krnr uninstall` behave correctly after the second install.

## Tests & docs
- Unit tests added for SUDO_USER install/uninstall/reinstall and metadata-driven status checks.
- `docs/install.md` updated to document sudoâ†’user install semantics.

## Upgrade notes
- No DB or user-facing CLI breaking changes. Users should upgrade to v1.2.8 to get the installer robustness fixes.

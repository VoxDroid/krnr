# v1.2.1 - 2026-01-17

This patch release (v1.2.1) contains a focused set of quality-of-life and robustness improvements aimed at improving command saving and execution on Windows shells.

Highlights

- CLI: `save` — Enhanced `krnr save` to better tolerate common shell quoting mistakes by joining or merging split command arguments and by applying heuristics to reconstruct `findstr /C:"..."` patterns. This reduces accidental mis-saves when users invoke `krnr save` from shells that split embedded quotes.
- Executor: Windows `findstr` pipelines — For simple pipelines of the form `<left> | findstr <args...>`, the executor now runs the left command and pipes its stdout into `findstr` directly (bypassing `cmd.exe`). This avoids fragile `cmd.exe` quoting/parsing behavior and fixes cases where `findstr` erroneously tried to open files like `Name`.
- Tests: Unit tests added for save join/merge behavior and for Windows `findstr` pipeline execution. Existing tests and linters were updated and run; complexity and revive linter issues were resolved.
- Dependency: Uses `github.com/kballard/go-shellquote` to robustly split shell-quoted tokens when needed.

Notes for users

- If you previously had saves that looked like `systeminfo | findstr /C:OS Name /C:OS Version` (where quoting got lost at the shell), `krnr` v1.2.1 will try to save them as a single command and reinsert the expected `/C:"..."` quoting on save when the heuristic applies.
- For maximal reliability on Windows, prefer quoting the full `-c` command where possible (e.g., `-c 'systeminfo | findstr /C:"OS Name" /C:"OS Version"'` in PowerShell). If you frequently encounter complex shell quoting issues, consider the suggested `--command-file` approach (file/stdin) as a follow-up improvement.

Acknowledgements

Thanks to contributors and testers for reporting the `findstr` pipeline failures and for validating the save/merge heuristics on Windows shells.
